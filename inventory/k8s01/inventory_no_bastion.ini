# =============================================================================
# inventory_no_bastion.ini - Inventory Configuration Without Bastion
# =============================================================================
# This is a test inventory file without bastion configuration
# Used to test smart kubectl configuration fallback to local
# =============================================================================

[all]
# Control plane nodes
kube-master01 ansible_host=192.168.22.111 node_role=master
kube-master02 ansible_host=192.168.22.114 node_role=master
# Worker nodes  
kube-node01 ansible_host=192.168.22.112 node_role=worker
kube-node02 ansible_host=192.168.22.113 node_role=worker  

# Note: No bastion group defined - will fallback to local kubectl

[all:vars]
# SSH connection settings
ansible_user=appuser
ansible_ssh_pass=appuser
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
ansible_ssh_pipelining=true

# Privilege escalation
ansible_become=true
ansible_become_method=sudo
ansible_become_user=root

# Python interpreter
ansible_python_interpreter=/usr/bin/python3

# Connection optimization
ansible_ssh_retries=3
ansible_connect_timeout=30
ansible_command_timeout=30

[kube_control_plane]
kube-master01
kube-master02

[kube_control_plane:vars]
# Control plane specific variables
k8s_role=master
etcd_member=true

[etcd]
kube-master01

[etcd:vars]
# etcd specific configuration
etcd_cluster_setup=true
etcd_backup_enabled=true

[kube_node]
kube-node01
kube-node02

[kube_node:vars]
# Worker node specific variables
k8s_role=worker
kubelet_max_pods=110

[calico_rr]
# Calico route reflectors (optional for large clusters)

[k8s_cluster:children]
kube_control_plane
kube_node
calico_rr

[k8s_cluster:vars]
# Cluster-wide variables
cluster_name=kubepilot-cluster
kubernetes_version="{{ kube_version }}"
container_runtime=containerd

# Network configuration
cluster_cidr="{{ kube_pod_cidr }}"
service_cidr="{{ kube_service_cidr }}"
cluster_dns_ip="{{ kube_service_cidr | ipaddr('10') | ipaddr('address') }}"

# Feature gates
feature_gates=["EphemeralContainers=true", "HPAScaleToZero=true", "InPlacePodVerticalScaling=true"]

# Logging and monitoring
log_level=2
audit_log_enabled=false
metrics_server_enabled=true 