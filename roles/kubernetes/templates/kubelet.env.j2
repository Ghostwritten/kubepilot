# =============================================================================
# Kubelet Environment Configuration - Simplified for v1.31.9
# =============================================================================

# Basic logging
KUBE_LOGTOSTDERR="--logtostderr=true"
KUBE_LOG_LEVEL="--v={{ kubelet_log_level | default('2') }}"

# Network configuration
KUBELET_ADDRESS="--node-ip={{ kubelet_node_ip | default('') }}"
KUBELET_HOSTNAME="--hostname-override={{ inventory_hostname }}"

# Main kubelet arguments - Simplified
KUBELET_ARGS="--config=/var/lib/kubelet/config.yaml \
--kubeconfig=/etc/kubernetes/kubelet.conf \
--container-runtime-endpoint={{ kubelet_container_runtime_endpoint | default('unix:///run/containerd/containerd.sock') }} \
--cgroup-driver={{ kubelet_cgroup_driver | default('systemd') }} \
--fail-swap-on=true \
--max-pods=110 \
--cluster-domain={{ kubelet_cluster_domain | default('cluster.local') }} \
--cluster-dns={{ kubelet_cluster_dns | default('10.96.0.10') }}"

# Legacy Docker support (empty for containerd)
DOCKER_SOCKET=""

# Network plugin configuration
KUBELET_NETWORK_PLUGIN=""

# Volume plugin configuration
KUBELET_VOLUME_PLUGIN=""

# Cloud provider configuration
KUBELET_CLOUDPROVIDER=""

# Path configuration
PATH=/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin 